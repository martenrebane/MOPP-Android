<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="et">
<head>
<!-- Generated by javadoc (1.8.0_242-release) on Mon Jun 07 14:45:08 EEST 2021 -->
<title>ConfigurationManager</title>
<meta name="date" content="2021-06-07">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ConfigurationManager";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../ee/ria/DigiDoc/configuration/ConfigurationDateUtil.html" title="class in ee.ria.DigiDoc.configuration"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../ee/ria/DigiDoc/configuration/ConfigurationManagerService.html" title="class in ee.ria.DigiDoc.configuration"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?ee/ria/DigiDoc/configuration/ConfigurationManager.html" target="_top">Frames</a></li>
<li><a href="ConfigurationManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">ee.ria.DigiDoc.configuration</div>
<h2 title="Class ConfigurationManager" class="title">Class ConfigurationManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>ee.ria.DigiDoc.configuration.ConfigurationManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">ConfigurationManager</span>
extends java.lang.Object</pre>
<div class="block">Configuration manager that loads and initialises configuration.

 For initial application startup cached (if exists and is older than default configuration) or default
 configuration is loaded in blocking manner. And same time asynchronous loading from central configuration
 service is initiated. If loading from central configuration service fails then configuration is loaded
 from cache (if exists). If loading from cache fails or cache does not yet exist then default configuration
 is loaded.

 If downloaded central service configuration signature matches with currently cached configuration signature
 then cached configuration is loaded instead.

 Default configuration is packaged to the APK assets folder and is updated by gradle task
 FetchAndPackageDefaultConfigurationTask during APK building process. Along with default configuration
 files configuration.properties file is packaged to APK which contains:
      * central-configuration-service.url: Central configuration service url from where the configuration
      is download throughout the application. Defaults to "https://id.eesti.ee".
      * configuration.update-interval: Interval in days for how often configuration is updated against central
      configuration service. Defaults to 7.
 Default values are in resources/default-configuration.properties file.
 These values can be overridden during building APK, for example:
      gradle clean fetchAndPackageDefaultConfiguration --args="https://id.eesti.ee 7" app:assemble

 After each load, configuration's signature is verified against the default configuration signature public key
 that is packaged with the APK.

 When configuration is loaded then it is cached to the devices drive. Configuration consists of configuration
 json, it's signature and public key. Along with named configuration files a configuration-info.properties
 file is also cached. This properties file contains:
      * configuration.last-update-check-date: Date of last central configuration loading. Is updated each
      time central configuration is downloaded.
      * configuration.update-date: Date of last configuration update. Updated each time downloaded central
      configuration is actually loaded for usage (download configuration differs from cached configuration).

 During each application start-up cached configuration update date (configuration.update-date) is compared
 to current date and if the difference in days exceeds <configuration.update-interval> then configuration
 is downloaded from central configuration service. If downloaded central configuration differs from cached
 configuration then central configuration is loaded for use and cached configuration is updated, else cached
 version is used.

 If central configuration download fails for whatever reason then cached configuration is loaded.
 If cached configuration loading fails for whatever reason then default configuration is loaded.
 If default configuration loading fails then application startup fails.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../ee/ria/DigiDoc/configuration/ConfigurationManager.html#ConfigurationManager-android.content.Context-ee.ria.DigiDoc.configuration.ConfigurationProperties-ee.ria.DigiDoc.configuration.loader.CachedConfigurationHandler-java.lang.String-">ConfigurationManager</a></span>(android.content.Context&nbsp;context,
                    <a href="../../../../ee/ria/DigiDoc/configuration/ConfigurationProperties.html" title="class in ee.ria.DigiDoc.configuration">ConfigurationProperties</a>&nbsp;configurationProperties,
                    <a href="../../../../ee/ria/DigiDoc/configuration/loader/CachedConfigurationHandler.html" title="class in ee.ria.DigiDoc.configuration.loader">CachedConfigurationHandler</a>&nbsp;cachedConfigurationHandler,
                    java.lang.String&nbsp;userAgent)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../ee/ria/DigiDoc/configuration/ConfigurationProvider.html" title="class in ee.ria.DigiDoc.configuration">ConfigurationProvider</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../ee/ria/DigiDoc/configuration/ConfigurationManager.html#forceLoadCachedConfiguration--">forceLoadCachedConfiguration</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../ee/ria/DigiDoc/configuration/ConfigurationProvider.html" title="class in ee.ria.DigiDoc.configuration">ConfigurationProvider</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../ee/ria/DigiDoc/configuration/ConfigurationManager.html#forceLoadDefaultConfiguration--">forceLoadDefaultConfiguration</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../../ee/ria/DigiDoc/configuration/ConfigurationProvider.html" title="class in ee.ria.DigiDoc.configuration">ConfigurationProvider</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../ee/ria/DigiDoc/configuration/ConfigurationManager.html#getConfiguration--">getConfiguration</a></span>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ConfigurationManager-android.content.Context-ee.ria.DigiDoc.configuration.ConfigurationProperties-ee.ria.DigiDoc.configuration.loader.CachedConfigurationHandler-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ConfigurationManager</h4>
<pre>public&nbsp;ConfigurationManager(android.content.Context&nbsp;context,
                            <a href="../../../../ee/ria/DigiDoc/configuration/ConfigurationProperties.html" title="class in ee.ria.DigiDoc.configuration">ConfigurationProperties</a>&nbsp;configurationProperties,
                            <a href="../../../../ee/ria/DigiDoc/configuration/loader/CachedConfigurationHandler.html" title="class in ee.ria.DigiDoc.configuration.loader">CachedConfigurationHandler</a>&nbsp;cachedConfigurationHandler,
                            java.lang.String&nbsp;userAgent)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getConfiguration--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getConfiguration</h4>
<pre>public&nbsp;<a href="../../../../ee/ria/DigiDoc/configuration/ConfigurationProvider.html" title="class in ee.ria.DigiDoc.configuration">ConfigurationProvider</a>&nbsp;getConfiguration()</pre>
</li>
</ul>
<a name="forceLoadCachedConfiguration--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forceLoadCachedConfiguration</h4>
<pre>public&nbsp;<a href="../../../../ee/ria/DigiDoc/configuration/ConfigurationProvider.html" title="class in ee.ria.DigiDoc.configuration">ConfigurationProvider</a>&nbsp;forceLoadCachedConfiguration()</pre>
</li>
</ul>
<a name="forceLoadDefaultConfiguration--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>forceLoadDefaultConfiguration</h4>
<pre>public&nbsp;<a href="../../../../ee/ria/DigiDoc/configuration/ConfigurationProvider.html" title="class in ee.ria.DigiDoc.configuration">ConfigurationProvider</a>&nbsp;forceLoadDefaultConfiguration()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../ee/ria/DigiDoc/configuration/ConfigurationDateUtil.html" title="class in ee.ria.DigiDoc.configuration"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../ee/ria/DigiDoc/configuration/ConfigurationManagerService.html" title="class in ee.ria.DigiDoc.configuration"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?ee/ria/DigiDoc/configuration/ConfigurationManager.html" target="_top">Frames</a></li>
<li><a href="ConfigurationManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
